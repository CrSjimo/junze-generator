import { corpusRegistry, functionRegistry } from "./registries";
import { default as random } from "random";
import { default as juejuezi } from './lib/juejuezi';
import { default as rpnCalc } from './lib/rpnCalc';

functionRegistry.set('a', (context, args)=>{
    let array = JSON.parse(args[0]);
    if(!(array instanceof Array)){
        throw new SyntaxError('Invalid array syntax.');
    }
    let index = parseInt(args[1]);
    index = isNaN(index) ? random.int(0, array.length-1) : index;
    return array[index];
});

functionRegistry.set('c', ()=>{
    return String.fromCharCode(random.int(0x4e00,0x9fff));
});

functionRegistry.set('C', (context, args)=>{
    return rpnCalc(...args.map(v=>{
        let n = parseFloat(v);
        if(isNaN(n))return v;
        else return n;
    }));
});

functionRegistry.set('d', (context)=>{
    if(!context.date)context.date = new Date('2021/04/28');
    return Math.floor((Date.now() - Number(context.date))/(1000*86400));
});

functionRegistry.set('e', (context)=>{
    if(!context.date)context.date = new Date('2021/04/28');
    return -Math.floor((Date.now() - Number(context.date))/(1000*86400));
});

const EMOJI_CATEGORY_LIST = 'ðŸ˜€,ðŸ˜ƒ,ðŸ˜„,ðŸ˜,ðŸ˜†,ðŸ˜…,ðŸ˜‚,ðŸ¤£,ðŸ˜‡,ðŸ˜‰,ðŸ˜Š,ðŸ™‚,ðŸ™ƒ,â˜º,ðŸ˜‹,ðŸ˜Œ,ðŸ˜,ðŸ¥°,ðŸ˜˜,ðŸ˜—,ðŸ˜™,ðŸ˜š,ðŸ¥²,ðŸ¤ª,ðŸ˜œ,ðŸ˜,ðŸ˜›,ðŸ¤‘,ðŸ˜Ž,ðŸ¤“,ðŸ¥¸,ðŸ§,ðŸ¤ ,ðŸ¥³,ðŸ¤—,ðŸ¤¡,ðŸ˜,ðŸ˜¶,ðŸ˜,ðŸ˜‘,ðŸ˜’,ðŸ™„,ðŸ¤¨,ðŸ¤”,ðŸ¤«,ðŸ¤­,ðŸ¤¥,ðŸ˜³,ðŸ˜ž,ðŸ˜Ÿ,ðŸ˜ ,ðŸ˜¡,ðŸ¤¬,ðŸ˜”,ðŸ˜•,ðŸ™,â˜¹,ðŸ˜¬,ðŸ¥º,ðŸ˜£,ðŸ˜–,ðŸ˜«,ðŸ˜©,ðŸ¥±,ðŸ˜¤,ðŸ˜®â€ðŸ’¨,ðŸ˜®,ðŸ˜±,ðŸ˜¨,ðŸ˜°,ðŸ˜¯,ðŸ˜¦,ðŸ˜§,ðŸ˜¢,ðŸ˜¥,ðŸ˜ª,ðŸ¤¤,ðŸ˜“,ðŸ˜­,ðŸ¤©,ðŸ˜µ,ðŸ˜µâ€ðŸ’«,ðŸ¥´,ðŸ˜²,ðŸ¤¯,ðŸ¤,ðŸ˜·,ðŸ¤•,ðŸ¤’,ðŸ¤®,ðŸ¤¢,ðŸ¤§,ðŸ¥µ,ðŸ¥¶,ðŸ˜¶â€ðŸŒ«ï¸,ðŸ˜´,ðŸ’¤,ðŸ˜ˆ,ðŸ‘¿,ðŸ‘¹,ðŸ‘º,ðŸ’©,ðŸ‘»,ðŸ’€,â˜ ,ðŸ‘½,ðŸ¤–,ðŸŽƒ,ðŸ˜º,ðŸ˜¸,ðŸ˜¹,ðŸ˜»,ðŸ˜¼,ðŸ˜½,ðŸ™€,ðŸ˜¿,ðŸ˜¾,ðŸ‘,ðŸ¤²,ðŸ™Œ,ðŸ‘,ðŸ™,ðŸ¤,ðŸ‘,ðŸ‘Ž,ðŸ‘Š,âœŠ,ðŸ¤›,ðŸ¤œ,ðŸ¤ž,âœŒ,ðŸ¤˜,ðŸ¤Ÿ,ðŸ‘Œ,ðŸ¤Œ,ðŸ¤,ðŸ‘ˆ,ðŸ‘‰,ðŸ‘†,ðŸ‘‡,â˜,âœ‹,ðŸ¤š,ðŸ–,ðŸ––,ðŸ‘‹,ðŸ¤™,ðŸ’ª,ðŸ¦¾,ðŸ–•,âœ,ðŸ¤³,ðŸ’…,ðŸ¦µ,ðŸ¦¿,ðŸ¦¶,ðŸ‘„,ðŸ¦·,ðŸ‘…,ðŸ‘‚,ðŸ¦»,ðŸ‘ƒ,ðŸ‘,ðŸ‘€,ðŸ§ ,ðŸ«€,ðŸ«,ðŸ¦´,ðŸ‘¤,ðŸ‘¥,ðŸ—£,ðŸ«‚,ðŸ‘¶,ðŸ‘§,ðŸ§’,ðŸ‘¦,ðŸ‘©,ðŸ§‘,ðŸ‘¨,ðŸ‘©â€ðŸ¦±,ðŸ§‘â€ðŸ¦±,ðŸ‘¨â€ðŸ¦±,ðŸ‘©â€ðŸ¦°,ðŸ§‘â€ðŸ¦°,ðŸ‘¨â€ðŸ¦°,ðŸ‘±â€â™€ï¸,ðŸ‘±,ðŸ‘±â€â™‚ï¸,ðŸ‘©â€ðŸ¦³,ðŸ§‘â€ðŸ¦³,ðŸ‘¨â€ðŸ¦³,ðŸ‘©â€ðŸ¦²,ðŸ§‘â€ðŸ¦²,ðŸ‘¨â€ðŸ¦²,ðŸ§”â€â™€ï¸,ðŸ§”,ðŸ§”â€â™‚ï¸,ðŸ‘µ,ðŸ§“,ðŸ‘´,ðŸ‘²,ðŸ‘³â€â™€ï¸,ðŸ‘³,ðŸ‘³â€â™‚ï¸,ðŸ§•,ðŸ‘¼,ðŸ‘¸,ðŸ¤´,ðŸ‘°,ðŸ‘°â€â™€ï¸,ðŸ‘°â€â™‚ï¸,ðŸ¤µâ€â™€ï¸,ðŸ¤µ,ðŸ¤µâ€â™‚ï¸,ðŸ™‡â€â™€ï¸,ðŸ™‡,ðŸ™‡â€â™‚ï¸,ðŸ’â€â™€ï¸,ðŸ’,ðŸ’â€â™‚ï¸,ðŸ™…â€â™€ï¸,ðŸ™…,ðŸ™…â€â™‚ï¸,ðŸ™†â€â™€ï¸,ðŸ™†,ðŸ™†â€â™‚ï¸,ðŸ¤·â€â™€ï¸,ðŸ¤·,ðŸ¤·â€â™‚ï¸,ðŸ™‹â€â™€ï¸,ðŸ™‹,ðŸ™‹â€â™‚ï¸,ðŸ¤¦â€â™€ï¸,ðŸ¤¦,ðŸ¤¦â€â™‚ï¸,ðŸ§â€â™€ï¸,ðŸ§,ðŸ§â€â™‚ï¸,ðŸ™Žâ€â™€ï¸,ðŸ™Ž,ðŸ™Žâ€â™‚ï¸,ðŸ™â€â™€ï¸,ðŸ™,ðŸ™â€â™‚ï¸,ðŸ’‡â€â™€ï¸,ðŸ’‡,ðŸ’‡â€â™‚ï¸,ðŸ’†â€â™€ï¸,ðŸ’†,ðŸ’†â€â™‚ï¸,ðŸ¤°,ðŸ¤±,ðŸ‘©â€ðŸ¼,ðŸ§‘â€ðŸ¼,ðŸ‘¨â€ðŸ¼,ðŸ§Žâ€â™€ï¸,ðŸ§Ž,ðŸ§Žâ€â™‚ï¸,ðŸ§â€â™€ï¸,ðŸ§,ðŸ§â€â™‚ï¸,ðŸš¶â€â™€ï¸,ðŸš¶,ðŸš¶â€â™‚ï¸,ðŸ‘©â€ðŸ¦¯,ðŸ§‘â€ðŸ¦¯,ðŸ‘¨â€ðŸ¦¯,ðŸƒâ€â™€ï¸,ðŸƒ,ðŸƒâ€â™‚ï¸,ðŸ‘©â€ðŸ¦¼,ðŸ§‘â€ðŸ¦¼,ðŸ‘¨â€ðŸ¦¼,ðŸ‘©â€ðŸ¦½,ðŸ§‘â€ðŸ¦½,ðŸ‘¨â€ðŸ¦½,ðŸ’ƒ,ðŸ•º,ðŸ‘«,ðŸ‘­,ðŸ‘¬,ðŸ§‘â€ðŸ¤â€ðŸ§‘,ðŸ‘©â€â¤ï¸â€ðŸ‘¨,ðŸ‘©â€â¤ï¸â€ðŸ‘©,ðŸ’‘,ðŸ‘¨â€â¤ï¸â€ðŸ‘¨,ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨,ðŸ‘©â€â¤ï¸â€ðŸ’‹â€ðŸ‘©,ðŸ’,ðŸ‘¨â€â¤ï¸â€ðŸ’‹â€ðŸ‘¨,â¤,ðŸ§¡ðŸ’›,ðŸ’š,ðŸ’™,ðŸ’œ,ðŸ¤Ž,ðŸ–¤,ðŸ¤,ðŸ’”,â£,ðŸ’•,ðŸ’ž,ðŸ’“,ðŸ’—,ðŸ’–,ðŸ’˜,ðŸ’,â¤ï¸â€ðŸ”¥,â¤ï¸â€ðŸ©¹,ðŸ’Ÿ;ðŸ¶,ðŸ±,ðŸ­,ðŸ¹,ðŸ°,ðŸ»,ðŸ§¸,ðŸ¼,ðŸ»â€â„ï¸,ðŸ¨,ðŸ¯,ðŸ¦,ðŸ®,ðŸ·,ðŸ½,ðŸ¸,ðŸµ,ðŸ™ˆ,ðŸ™‰,ðŸ™Š,ðŸ’,ðŸ¦,ðŸ¦§,ðŸ”,ðŸ§,ðŸ¦,ðŸ¤,ðŸ£,ðŸ¥,ðŸº,ðŸ¦Š,ðŸ¦,ðŸ—,ðŸ´,ðŸ¦“,ðŸ¦’,ðŸ¦Œ,ðŸ¦˜,ðŸ¦¥,ðŸ¦¦,ðŸ¦«,ðŸ¦„,ðŸ,ðŸ›,ðŸ¦‹,ðŸŒ,ðŸª²,ðŸž,ðŸœ,ðŸ¦—,ðŸª³,ðŸ•·,ðŸ•¸,ðŸ¦‚,ðŸ¦Ÿ,ðŸª°,ðŸª±,ðŸ¦ ,ðŸ¢,ðŸ,ðŸ¦Ž,ðŸ™,ðŸ¦‘,ðŸ¦ž,ðŸ¦€,ðŸ¦,ðŸ¦ª,ðŸ ,ðŸŸ,ðŸ¡,ðŸ¬,ðŸ¦ˆ,ðŸ¦­,ðŸ³,ðŸ‹,ðŸŠ,ðŸ†,ðŸ…,ðŸƒ,ðŸ‚,ðŸ„,ðŸ¦¬,ðŸª,ðŸ«,ðŸ¦™,ðŸ˜,ðŸ¦,ðŸ¦›,ðŸ¦£,ðŸ,ðŸ,ðŸ‘,ðŸŽ,ðŸ–,ðŸ¦‡,ðŸ“,ðŸ¦ƒ,ðŸ•Š,ðŸ¦…,ðŸ¦†,ðŸ¦¢,ðŸ¦‰,ðŸ¦©,ðŸ¦š,ðŸ¦œ,ðŸ¦¤,ðŸª¶,ðŸ•,ðŸ¦®,ðŸ•â€ðŸ¦º,ðŸ©,ðŸˆ,ðŸˆâ€â¬›,ðŸ‡,ðŸ€,ðŸ,ðŸ¿,ðŸ¦¨,ðŸ¦¡,ðŸ¦”,ðŸ¾,ðŸ‰,ðŸ²,ðŸ¦•,ðŸ¦–,ðŸŒµ,ðŸŽ„,ðŸŒ²,ðŸŒ³,ðŸŒ´,ðŸª´,ðŸŒ±,ðŸŒ¿,â˜˜,ðŸ€,ðŸŽ,ðŸŽ‹,ðŸƒ,ðŸ‚,ðŸ,ðŸŒ¾,ðŸŒº,ðŸŒ»,ðŸŒ¹,ðŸ¥€,ðŸŒ·,ðŸŒ¼,ðŸŒ¸,ðŸ’,ðŸ„,ðŸŒ°,ðŸš,ðŸŒŽ,ðŸŒ,ðŸŒ,ðŸŒ•,ðŸŒ–,ðŸŒ—,ðŸŒ˜,ðŸŒ‘,ðŸŒ’,ðŸŒ“,ðŸŒ”,ðŸŒ™,ðŸŒš,ðŸŒ,ðŸŒ›,ðŸŒœ,â­,ðŸŒŸ,ðŸ’«,âœ¨,â˜„,ðŸª,ðŸŒž,â˜€,ðŸŒ¤,â›…,ðŸŒ¥,ðŸŒ¦,â˜,ðŸŒ§,â›ˆ,ðŸŒ©,âš¡,ðŸ”¥,ðŸ’¥,â„,ðŸŒ¨,â˜ƒ,â›„,ðŸŒ¬,ðŸ’¨,ðŸŒª,ðŸŒ«,ðŸŒˆ,â˜”,ðŸ’§,ðŸ’¦,ðŸŒŠ;ðŸ,ðŸŽ,ðŸ,ðŸŠ,ðŸ‹,ðŸŒ,ðŸ‰,ðŸ‡,ðŸ“,ðŸˆ,ðŸ’,ðŸ«,ðŸ‘,ðŸ¥­,ðŸ,ðŸ¥¥,ðŸ¥,ðŸ…,ðŸ¥‘,ðŸ«’,ðŸ†,ðŸŒ¶,ðŸ«‘,ðŸ¥’,ðŸ¥¬,ðŸ¥¦,ðŸ§„,ðŸ§…,ðŸŒ½,ðŸ¥•,ðŸ¥—,ðŸ¥”,ðŸ ,ðŸ¥œ,ðŸ¯,ðŸž,ðŸ¥,ðŸ¥–,ðŸ«“,ðŸ¥¨,ðŸ¥¯,ðŸ¥ž,ðŸ§‡,ðŸ§€,ðŸ—,ðŸ–,ðŸ¥©,ðŸ¤,ðŸ¥š,ðŸ³,ðŸ¥“,ðŸ”,ðŸŸ,ðŸŒ­,ðŸ•,ðŸ,ðŸ¥ª,ðŸŒ®,ðŸŒ¯,ðŸ«”,ðŸ¥™,ðŸ§†,ðŸœ,ðŸ¥˜,ðŸ²,ðŸ«•,ðŸ¥«,ðŸ§‚,ðŸ§ˆ,ðŸ¥,ðŸ£,ðŸ±,ðŸ›,ðŸ™,ðŸš,ðŸ˜,ðŸ¥Ÿ,ðŸ¢,ðŸ¡,ðŸ§,ðŸ¨,ðŸ¦,ðŸ°,ðŸŽ‚,ðŸ§,ðŸ¥§,ðŸ®,ðŸ­,ðŸ¬,ðŸ«,ðŸ¿,ðŸ©,ðŸª,ðŸ¥ ,ðŸ¥®,â˜•,ðŸµ,ðŸ«–,ðŸ¥£,ðŸ¼,ðŸ¥¤,ðŸ§‹,ðŸ§ƒ,ðŸ§‰,ðŸ¥›,ðŸº,ðŸ»,ðŸ·,ðŸ¥‚,ðŸ¥ƒ,ðŸ¸,ðŸ¹,ðŸ¾,ðŸ¶,ðŸ§Š,ðŸ¥„,ðŸ´,ðŸ½,ðŸ¥¢,ðŸ¥¡;âš½,ðŸ€,ðŸˆ,âš¾,ðŸ¥Ž,ðŸŽ¾,ðŸ,ðŸ‰,ðŸŽ±,ðŸ¥,ðŸªƒ,ðŸ“,ðŸ¸,ðŸ¥…,ðŸ’,ðŸ‘,ðŸ,ðŸ¥,ðŸ¥Œ,â›³,ðŸ¹,ðŸŽ£,ðŸ¤¿,ðŸ¥Š,ðŸ¥‹,â›¸,ðŸŽ¿,ðŸ›·,â›·,ðŸ‚,ðŸ‹ï¸â€â™€ï¸,ðŸ‹,ðŸ‹ï¸â€â™‚ï¸,ðŸ¤º,ðŸ¤¼â€â™€ï¸,ðŸ¤¼,ðŸ¤¼â€â™‚ï¸,ðŸ¤¸â€â™€ï¸,ðŸ¤¸,ðŸ¤¸â€â™‚ï¸,â›¹ï¸â€â™€ï¸,â›¹,â›¹ï¸â€â™‚ï¸,ðŸ¤¾â€â™€ï¸,ðŸ¤¾,ðŸ¤¾â€â™‚ï¸,ðŸ§—â€â™€ï¸,ðŸ§—,ðŸ§—â€â™‚ï¸,ðŸŒï¸â€â™€ï¸,ðŸŒ,ðŸŒï¸â€â™‚ï¸,ðŸ§˜â€â™€ï¸,ðŸ§˜,ðŸ§˜â€â™‚ï¸,ðŸ§–â€â™€ï¸,ðŸ§–,ðŸ§–â€â™‚ï¸,ðŸ„â€â™€ï¸,ðŸ„,ðŸ„â€â™‚ï¸,ðŸŠâ€â™€ï¸,ðŸŠ,ðŸŠâ€â™‚ï¸,ðŸ¤½â€â™€ï¸,ðŸ¤½,ðŸ¤½â€â™‚ï¸,ðŸš£â€â™€ï¸,ðŸš£,ðŸš£â€â™‚ï¸,ðŸ‡,ðŸš´â€â™€ï¸,ðŸš´,ðŸš´â€â™‚ï¸,ðŸšµâ€â™€ï¸,ðŸšµ,ðŸšµâ€â™‚ï¸,ðŸŽ½,ðŸŽ–,ðŸ…,ðŸ¥‡,ðŸ¥ˆ,ðŸ¥‰,ðŸ†,ðŸµ,ðŸŽ—,ðŸŽ«,ðŸŽŸ,ðŸŽª,ðŸ¤¹â€â™€ï¸,ðŸ¤¹,ðŸ¤¹â€â™‚ï¸,ðŸŽ­,ðŸŽ¨,ðŸŽ¬,ðŸŽ¤,ðŸŽ§,ðŸŽ¼,ðŸŽ¹,ðŸª—,ðŸ¥,ðŸª˜,ðŸŽ·,ðŸŽº,ðŸŽ¸,ðŸª•,ðŸŽ»,ðŸŽ²,ðŸ§©,â™Ÿ,ðŸŽ¯,ðŸŽ³,ðŸª€,ðŸª,ðŸŽ®,ðŸ‘¾,ðŸŽ°,ðŸ‘®â€â™€ï¸,ðŸ‘®,ðŸ‘®â€â™‚ï¸,ðŸ‘©â€ðŸš’,ðŸ§‘â€ðŸš’,ðŸ‘¨â€ðŸš’,ðŸ‘·â€â™€ï¸,ðŸ‘·,ðŸ‘·â€â™‚ï¸,ðŸ‘©â€ðŸ­,ðŸ§‘â€ðŸ­,ðŸ‘¨â€ðŸ­,ðŸ‘©â€ðŸ”§,ðŸ§‘â€ðŸ”§,ðŸ‘¨â€ðŸ”§,ðŸ‘©â€ðŸŒ¾,ðŸ§‘â€ðŸŒ¾,ðŸ‘¨â€ðŸŒ¾,ðŸ‘©â€ðŸ³,ðŸ§‘â€ðŸ³,ðŸ‘¨â€ðŸ³,ðŸ‘©â€ðŸŽ¤,ðŸ§‘â€ðŸŽ¤,ðŸ‘¨â€ðŸŽ¤,ðŸ‘©â€ðŸŽ¨,ðŸ§‘â€ðŸŽ¨,ðŸ‘¨â€ðŸŽ¨,ðŸ‘©â€ðŸ«,ðŸ§‘â€ðŸ«,ðŸ‘¨â€ðŸ«,ðŸ‘©â€ðŸŽ“,ðŸ§‘â€ðŸŽ“,ðŸ‘¨â€ðŸŽ“,ðŸ‘©â€ðŸ’¼,ðŸ§‘â€ðŸ’¼,ðŸ‘¨â€ðŸ’¼,ðŸ‘©â€ðŸ’»,ðŸ§‘â€ðŸ’»,ðŸ‘¨â€ðŸ’»,ðŸ‘©â€ðŸ”¬,ðŸ§‘â€ðŸ”¬,ðŸ‘¨â€ðŸ”¬,ðŸ‘©â€ðŸš€,ðŸ§‘â€ðŸš€,ðŸ‘¨â€ðŸš€,ðŸ‘©â€âš•ï¸,ðŸ§‘â€âš•ï¸,ðŸ‘¨â€âš•ï¸,ðŸ‘©â€âš–ï¸,ðŸ§‘â€âš–ï¸,ðŸ‘¨â€âš–ï¸,ðŸ‘©â€âœˆï¸,ðŸ§‘â€âœˆï¸,ðŸ‘¨â€âœˆï¸,ðŸ’‚â€â™€ï¸,ðŸ’‚,ðŸ’‚â€â™‚ï¸,ðŸ¥·,ðŸ•µï¸â€â™€ï¸,ðŸ•µ,ðŸ•µï¸â€â™‚ï¸,ðŸ¤¶,ðŸ§‘â€ðŸŽ„,ðŸŽ…,ðŸ•´ï¸â€â™€ï¸,ðŸ•´,ðŸ•´ï¸â€â™‚ï¸,ðŸ¦¸â€â™€ï¸,ðŸ¦¸,ðŸ¦¸â€â™‚ï¸,ðŸ¦¹â€â™€ï¸,ðŸ¦¹,ðŸ¦¹â€â™‚ï¸,ðŸ§™â€â™€ï¸,ðŸ§™,ðŸ§™â€â™‚ï¸,ðŸ§â€â™€ï¸,ðŸ§,ðŸ§â€â™‚ï¸,ðŸ§šâ€â™€ï¸,ðŸ§š,ðŸ§šâ€â™‚ï¸,ðŸ§žâ€â™€ï¸,ðŸ§ž,ðŸ§žâ€â™‚ï¸,ðŸ§œâ€â™€ï¸,ðŸ§œ,ðŸ§œâ€â™‚ï¸,ðŸ§›â€â™€ï¸,ðŸ§›,ðŸ§›â€â™‚ï¸,ðŸ§Ÿâ€â™€ï¸,ðŸ§Ÿ,ðŸ§Ÿâ€â™‚ï¸,ðŸ‘¯â€â™€ï¸,ðŸ‘¯,ðŸ‘¯â€â™‚ï¸,ðŸ‘ª,ðŸ‘¨â€ðŸ‘©â€ðŸ‘§,ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§,ðŸ‘©â€ðŸ‘©â€ðŸ‘¦,ðŸ‘©â€ðŸ‘©â€ðŸ‘§,ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦,ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦,ðŸ‘©â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§,ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§,ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘§,ðŸ‘©â€ðŸ‘¦,ðŸ‘©â€ðŸ‘§,ðŸ‘©â€ðŸ‘§â€ðŸ‘¦,ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦,ðŸ‘©â€ðŸ‘§â€ðŸ‘§,ðŸ‘¨â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘§,ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦,ðŸ‘¨â€ðŸ‘§â€ðŸ‘§;ðŸš—,ðŸš™,ðŸš•,ðŸ›º,ðŸšŒ,ðŸšŽ,ðŸŽ,ðŸš“,ðŸš‘,ðŸš’,ðŸš,ðŸ›»,ðŸšš,ðŸš›,ðŸšœ,ðŸ,ðŸ›µ,ðŸš²,ðŸ¦¼,ðŸ¦½,ðŸ›´,ðŸ›¹,ðŸ›¼,ðŸš¨,ðŸš”,ðŸš,ðŸš˜,ðŸš–,ðŸš¡,ðŸš ,ðŸšŸ,ðŸšƒ,ðŸš‹,ðŸš,ðŸš„,ðŸš…,ðŸšˆ,ðŸšž,ðŸš‚,ðŸš†,ðŸš‡,ðŸšŠ,ðŸš‰,ðŸš,ðŸ›©,âœˆ,ðŸ›«,ðŸ›¬,ðŸª‚,ðŸ’º,ðŸ›°,ðŸš€,ðŸ›¸,ðŸ›¶,â›µ,ðŸ›¥,ðŸš¤,â›´,ðŸ›³,ðŸš¢,âš“,â›½,ðŸš§,ðŸš,ðŸš¦,ðŸš¥,ðŸ›‘,ðŸŽ¡,ðŸŽ¢,ðŸŽ ,ðŸ—,ðŸŒ,ðŸ—¼,ðŸ­,â›²,ðŸŽ‘,â›°,ðŸ”,ðŸ—»,ðŸŒ‹,ðŸ—¾,ðŸ•,â›º,ðŸž,ðŸ›£,ðŸ›¤,ðŸŒ…,ðŸŒ„,ðŸœ,ðŸ–,ðŸ,ðŸŒ‡,ðŸŒ†,ðŸ™,ðŸŒƒ,ðŸŒ‰,ðŸŒŒ,ðŸŒ ,ðŸŽ‡,ðŸŽ†,ðŸ›–,ðŸ˜,ðŸ°,ðŸ¯,ðŸŸ,ðŸ—½,ðŸ ,ðŸ¡,ðŸš,ðŸ¢,ðŸ¬,ðŸ£,ðŸ¤,ðŸ¥,ðŸ¦,ðŸ¨,ðŸª,ðŸ«,ðŸ©,ðŸ’’,ðŸ›,â›ª,ðŸ•Œ,ðŸ›•,ðŸ•,ðŸ•‹,â›©;âŒš,ðŸ“±,ðŸ“²,ðŸ’»,âŒ¨,ðŸ–¥,ðŸ–¨,ðŸ–±,ðŸ–²,ðŸ•¹,ðŸ—œ,ðŸ’½,ðŸ’¾,ðŸ’¿,ðŸ“€,ðŸ“¼,ðŸ“·,ðŸ“¸,ðŸ“¹,ðŸŽ¥,ðŸ“½,ðŸŽž,ðŸ“ž,â˜Ž,ðŸ“Ÿ,ðŸ“ ,ðŸ“º,ðŸ“»,ðŸŽ™,ðŸŽš,ðŸŽ›,â±,â²,â°,ðŸ•°,â³,âŒ›,ðŸ§®,ðŸ“¡,ðŸ”‹,ðŸ”Œ,ðŸ’¡,ðŸ”¦,ðŸ•¯,ðŸ§¯,ðŸ—‘,ðŸ›¢,ðŸ›’,ðŸ’¸,ðŸ’µ,ðŸ’´,ðŸ’¶,ðŸ’·,ðŸ’°,ðŸª™,ðŸ’³,ðŸ§¾,ðŸ’Ž,âš–,ðŸ¦¯,ðŸ§°,ðŸ”§,ðŸª›,ðŸ”¨,âš’,ðŸ› ,â›,ðŸª“,ðŸªš,ðŸ”©,âš™,â›“,ðŸª,ðŸªœ,ðŸ§±,ðŸª¨,ðŸªµ,ðŸ”«,ðŸ§¨,ðŸ’£,ðŸ”ª,ðŸ—¡,âš”,ðŸ›¡,ðŸš¬,âš°,ðŸª¦,âš±,ðŸº,ðŸ”®,ðŸª„,ðŸ“¿,ðŸ§¿,ðŸ’ˆ,ðŸ§²,âš—,ðŸ§ª,ðŸ§«,ðŸ§¬,ðŸ”­,ðŸ”¬,ðŸ•³,ðŸ’Š,ðŸ’‰,ðŸ©¸,ðŸ©¹,ðŸ©º,ðŸŒ¡,ðŸ·,ðŸ”–,ðŸš½,ðŸª ,ðŸš¿,ðŸ›,ðŸ›€,ðŸª¥,ðŸª’,ðŸ§´,ðŸ§»,ðŸ§¼,ðŸ§½,ðŸ§¹,ðŸ§º,ðŸª£,ðŸ”‘,ðŸ—,ðŸª¤,ðŸ›‹,ðŸª‘,ðŸ›Œ,ðŸ›,ðŸšª,ðŸªž,ðŸªŸ,ðŸ§³,ðŸ›Ž,ðŸ–¼,ðŸ§­,ðŸ—º,â›±,ðŸ—¿,ðŸ›,ðŸŽˆ,ðŸŽ,ðŸŽ€,ðŸ§§,ðŸŽ,ðŸŽŠ,ðŸŽ‰,ðŸª…,ðŸª†,ðŸŽŽ,ðŸŽ,ðŸ®,ðŸª”,âœ‰,ðŸ“©,ðŸ“¨,ðŸ“§,ðŸ’Œ,ðŸ“®,ðŸ“ª,ðŸ“«,ðŸ“¬,ðŸ“­,ðŸ“¦,ðŸ“¯,ðŸ“¥,ðŸ“¤,ðŸ“œ,ðŸ“ƒ,ðŸ“‘,ðŸ“Š,ðŸ“ˆ,ðŸ“‰,ðŸ“„,ðŸ“…,ðŸ“†,ðŸ—“,ðŸ“‡,ðŸ—ƒ,ðŸ—³,ðŸ—„,ðŸ“‹,ðŸ—’,ðŸ“,ðŸ“‚,ðŸ—‚,ðŸ—ž,ðŸ“°,ðŸª§,ðŸ““,ðŸ“•,ðŸ“—,ðŸ“˜,ðŸ“™,ðŸ“”,ðŸ“’,ðŸ“š,ðŸ“–,ðŸ”—,ðŸ“Ž,ðŸ–‡,âœ‚,ðŸ“,ðŸ“,ðŸ“Œ,ðŸ“,ðŸ§·,ðŸª¡,ðŸ§µ,ðŸ§¶,ðŸª¢,ðŸ”,ðŸ”’,ðŸ”“,ðŸ”,ðŸ–Š,ðŸ–‹,âœ’,ðŸ“,âœ,ðŸ–,ðŸ–Œ,ðŸ”,ðŸ”Ž,ðŸ‘š,ðŸ‘•,ðŸ¥¼,ðŸ¦º,ðŸ§¥,ðŸ‘–,ðŸ‘”,ðŸ‘—,ðŸ‘˜,ðŸ¥»,ðŸ©±,ðŸ‘™,ðŸ©²,ðŸ©³,ðŸ’„,ðŸ’‹,ðŸ‘£,ðŸ§¦,ðŸ©´,ðŸ‘ ,ðŸ‘¡,ðŸ‘¢,ðŸ¥¿,ðŸ‘ž,ðŸ‘Ÿ,ðŸ©°,ðŸ¥¾,ðŸ§¢,ðŸ‘’,ðŸŽ©,ðŸŽ“,ðŸ‘‘,â›‘,ðŸª–,ðŸŽ’,ðŸ‘,ðŸ‘›,ðŸ‘œ,ðŸ’¼,ðŸ‘“,ðŸ•¶,ðŸ¥½,ðŸ§£,ðŸ§¤,ðŸ’,ðŸŒ‚,â˜‚;â˜®,âœ,â˜ª,ðŸ•‰,â˜¸,âœ¡,ðŸ”¯,ðŸ•Ž,â˜¯,â˜¦,ðŸ›,â›Ž,â™ˆ,â™‰,â™Š,â™‹,â™Œ,â™,â™Ž,â™,â™,â™‘,â™’,â™“,ðŸ†”,âš›,âš•,â˜¢,â˜£,ðŸ“´,ðŸ“³,ðŸˆ¶,ðŸˆš,ðŸˆ¸,ðŸˆº,ðŸˆ·,âœ´,ðŸ†š,ðŸ‰‘,ðŸ’®,ðŸ‰,ãŠ™,ãŠ—,ðŸˆ´,ðŸˆµ,ðŸˆ¹,ðŸˆ²,ðŸ…°,ðŸ…±,ðŸ†Ž,ðŸ†‘,ðŸ…¾,ðŸ†˜,â›”,ðŸ“›,ðŸš«,âŒ,â­•,ðŸ’¢,â™¨,ðŸš·,ðŸš¯,ðŸš³,ðŸš±,ðŸ”ž,ðŸ“µ,ðŸš­,â—,â•,â“,â”,â€¼,â‰,ðŸ’¯,ðŸ”…,ðŸ”†,ðŸ”±,âšœ,ã€½,âš ,ðŸš¸,ðŸ”°,â™»,ðŸˆ¯,ðŸ’¹,â‡,âœ³,âŽ,âœ…,ðŸ’ ,ðŸŒ€,âž¿,ðŸŒ,â™¾,â“‚,ðŸ§,ðŸš¾,â™¿,ðŸ…¿,ðŸˆ³,ðŸˆ‚,ðŸ›‚,ðŸ›ƒ,ðŸ›„,ðŸ›…,ðŸš°,ðŸ›—,ðŸš¹,â™‚,ðŸšº,â™€,âš§,ðŸš¼,ðŸš»,ðŸš®,ðŸŽ¦,ðŸ“¶,ðŸˆ,ðŸ†–,ðŸ†—,ðŸ†™,ðŸ†’,ðŸ†•,ðŸ†“,0âƒ£,1âƒ£,2âƒ£,3âƒ£,4âƒ£,5âƒ£,6âƒ£,7âƒ£,8âƒ£,9âƒ£,ðŸ”Ÿ,ðŸ”¢,â–¶,â¸,â¯,â¹,âº,â,â­,â®,â©,âª,ðŸ”€,ðŸ”,ðŸ”‚,â—€,ðŸ”¼,ðŸ”½,â«,â¬,âž¡,â¬…,â¬†,â¬‡,â†—,â†˜,â†™,â†–,â†•,â†”,ðŸ”„,â†ª,â†©,ðŸ”ƒ,â¤´,â¤µ,#âƒ£,*âƒ£,â„¹,ðŸ”¤,ðŸ”¡,ðŸ” ,ðŸ”£,ðŸŽµ,ðŸŽ¶,ã€°,âž°,âœ”,âž•,âž–,âž—,âœ–,ðŸ’²,ðŸ’±,Â©,Â®,â„¢,ðŸ”š,ðŸ”™,ðŸ”›,ðŸ”,ðŸ”œ,â˜‘,ðŸ”˜,ðŸ”´,ðŸŸ ,ðŸŸ¡,ðŸŸ¢,ðŸ”µ,ðŸŸ£,ðŸŸ¤,âš«,âšª,ðŸŸ¥,ðŸŸ§,ðŸŸ¨,ðŸŸ©,ðŸŸ¦,ðŸŸª,ðŸŸ«,â¬›,â¬œ,â—¼,â—»,â—¾,â—½,â–ª,â–«,ðŸ”¸,ðŸ”¹,ðŸ”¶,ðŸ”·,ðŸ”º,ðŸ”»,ðŸ”²,ðŸ”³,ðŸ”ˆ,ðŸ”‰,ðŸ”Š,ðŸ”‡,ðŸ“£,ðŸ“¢,ðŸ””,ðŸ”•,ðŸƒ,ðŸ€„,â™ ,â™£,â™¥,â™¦,ðŸŽ´,ðŸ‘â€ðŸ—¨,ðŸ—¨,ðŸ’­,ðŸ—¯,ðŸ’¬,ðŸ•,ðŸ•‘,ðŸ•’,ðŸ•“,ðŸ•”,ðŸ••,ðŸ•–,ðŸ•—,ðŸ•˜,ðŸ•™,ðŸ•š,ðŸ•›,ðŸ•œ,ðŸ•,ðŸ•ž,ðŸ•Ÿ,ðŸ• ,ðŸ•¡,ðŸ•¢,ðŸ•£,ðŸ•¤,ðŸ•¥,ðŸ•¦,ðŸ•§;ðŸ³,ðŸ´,ðŸ,ðŸš©,ðŸŽŒ,ðŸ´â€â˜ ï¸,ðŸ³ï¸â€ðŸŒˆ,ðŸ³ï¸â€âš§ï¸'.split(';');
const EMOJI_LIST = {
    p: EMOJI_CATEGORY_LIST[0].split(','),
    n: EMOJI_CATEGORY_LIST[1].split(','),
    d: EMOJI_CATEGORY_LIST[2].split(','),
    a: EMOJI_CATEGORY_LIST[3].split(','),
    t: EMOJI_CATEGORY_LIST[4].split(','),
    o: EMOJI_CATEGORY_LIST[5].split(','),
    s: EMOJI_CATEGORY_LIST[6].split(','),
    f: EMOJI_CATEGORY_LIST[7].split(','),
}
functionRegistry.set('E', (context, args)=>{
    if(args.length === 0)args = Object.keys(EMOJI_LIST);
    let specifiedEmojiLists = args.map(key => {
        if(Object.keys(EMOJI_LIST).includes(key)){
            return (EMOJI_LIST as any)[key];
        }else{
            throw new Error(`Unknown category: ${key}`);
        }
    });
    let candidates = [].concat(...specifiedEmojiLists);
    return candidates[random.int(0, candidates.length - 1)];
});

functionRegistry.set('j', (context, args)=>{
    return juejuezi(args[0], args[1]);
});

functionRegistry.set('n',(context,args)=>{
    let words: string[] = [];
    for(let flag of args){
        let wordList = corpusRegistry.get(flag);
        if(!wordList){
            throw new Error(`Unknown part of speech: ${flag}`);
        }
        words = words.concat(words, [...wordList.values()]);
    }
    return words[random.int(0,words.length-1)];
});

functionRegistry.set('r', (context, [type, min, max, digits])=>{
    if(type === 'int'){
        return random.int(parseInt(min), parseInt(max)).toString();
    }else if(type === 'float'){
        let f =  random.float(parseFloat(min),parseFloat(max));
        if(digits){
            return f.toFixed(parseInt(digits));
        }else{
            return f.toString();
        }
    }else{
        throw new Error(`Unknown random type: ${type}`);
    }
});